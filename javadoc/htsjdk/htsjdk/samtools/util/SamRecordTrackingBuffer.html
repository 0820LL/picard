<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>SamRecordTrackingBuffer (HTSJDK API Documentation)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SamRecordTrackingBuffer (HTSJDK API Documentation)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SamRecordTrackingBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../htsjdk/samtools/util/SamRecordIntervalIteratorFactory.html" title="class in htsjdk.samtools.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?htsjdk/samtools/util/SamRecordTrackingBuffer.html" target="_top">Frames</a></li>
<li><a href="SamRecordTrackingBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">htsjdk.samtools.util</div>
<h2 title="Class SamRecordTrackingBuffer" class="title">Class SamRecordTrackingBuffer&lt;T extends <a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>htsjdk.samtools.util.SamRecordTrackingBuffer&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">SamRecordTrackingBuffer&lt;T extends <a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&gt;</span>
extends java.lang.Object</pre>
<div class="block">This class stores SAMRecords for return.  The purpose of this class is to buffer records that need to be modified or processed in some
 fashion, and only return (or emit) them when they have been recorded as being fully examined.  If we have too many records in RAM,
 we can spill over to disk.  The order in which they are given (via SamRecordWithOrdinal) determines their order of being returned.  It is the
 responsibility of the user of this class to make sure all records have unique index and are added in order.

 When a record is examined, we also store a result state.  This is currently a boolean to reduce on memory and disk footprint.

 We store groups of records in blocks and the size of these blocks can be controlled.  If we have too many records in RAM, we start
 spilling blocks to disk.

 Users should check isEmpty() to see if any records are still being tracked.  If so, they should check canEmit() to see if the
 next record can be returned.  If so, they can call next() to get that record.

 When users are done with this structure, call close().</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>bradtaylor</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#SamRecordTrackingBuffer-int-int-java.util.List-htsjdk.samtools.SAMFileHeader-java.lang.Class-">SamRecordTrackingBuffer</a></span>(int&nbsp;maxRecordsInRam,
                       int&nbsp;blockSize,
                       java.util.List&lt;java.io.File&gt;&nbsp;tmpDirs,
                       <a href="../../../htsjdk/samtools/SAMFileHeader.html" title="class in htsjdk.samtools">SAMFileHeader</a>&nbsp;header,
                       java.lang.Class&lt;<a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html" title="type parameter in SamRecordTrackingBuffer">T</a>&gt;&nbsp;clazz)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#add-htsjdk.samtools.util.SamRecordWithOrdinal-">add</a></span>(<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;samRecordWithOrdinal)</code>
<div class="block">Add the given SAMRecordIndex to the buffer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#canEmit--">canEmit</a></span>()</code>
<div class="block">Returns true if we can return the next record (it has been examined).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#close--">close</a></span>()</code>
<div class="block">Close IO resources associated with each underlying BufferBlock</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#contains-htsjdk.samtools.util.SamRecordWithOrdinal-">contains</a></span>(<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;samRecordWithOrdinal)</code>
<div class="block">Returns true if this buffer contains the record at the given index, false otherwise</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#isEmpty--">isEmpty</a></span>()</code>
<div class="block">Returns true if we are tracking no records, false otherwise</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#next--">next</a></span>()</code>
<div class="block">Returns the next element in the iteration.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#remove--">remove</a></span>()</code>
<div class="block">Removes the next record from this buffer</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#setResultState-htsjdk.samtools.util.SamRecordWithOrdinal-boolean-">setResultState</a></span>(<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;samRecordWithOrdinal,
              boolean&nbsp;resultState)</code>
<div class="block">Mark the current samRecordWithOrdinal as having been examined.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html#size--">size</a></span>()</code>
<div class="block">Return the total number of elements in the queue, both in memory and on disk</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SamRecordTrackingBuffer-int-int-java.util.List-htsjdk.samtools.SAMFileHeader-java.lang.Class-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SamRecordTrackingBuffer</h4>
<pre>public&nbsp;SamRecordTrackingBuffer(int&nbsp;maxRecordsInRam,
                               int&nbsp;blockSize,
                               java.util.List&lt;java.io.File&gt;&nbsp;tmpDirs,
                               <a href="../../../htsjdk/samtools/SAMFileHeader.html" title="class in htsjdk.samtools">SAMFileHeader</a>&nbsp;header,
                               java.lang.Class&lt;<a href="../../../htsjdk/samtools/util/SamRecordTrackingBuffer.html" title="type parameter in SamRecordTrackingBuffer">T</a>&gt;&nbsp;clazz)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxRecordsInRam</code> - how many records to buffer before spilling to disk</dd>
<dd><code>blockSize</code> - the number of records in a given block</dd>
<dd><code>tmpDirs</code> - the temporary directories to use when spilling to disk</dd>
<dd><code>header</code> - the header</dd>
<dd><code>clazz</code> - the class that extends SamRecordWithOrdinal</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isEmpty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEmpty</h4>
<pre>public&nbsp;boolean&nbsp;isEmpty()</pre>
<div class="block">Returns true if we are tracking no records, false otherwise</div>
</li>
</ul>
<a name="canEmit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canEmit</h4>
<pre>public&nbsp;boolean&nbsp;canEmit()</pre>
<div class="block">Returns true if we can return the next record (it has been examined).</div>
</li>
</ul>
<a name="add-htsjdk.samtools.util.SamRecordWithOrdinal-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;void&nbsp;add(<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;samRecordWithOrdinal)</pre>
<div class="block">Add the given SAMRecordIndex to the buffer.  The records must be added in order.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>samRecordWithOrdinal</code> - The samRecordWithOrdinal to be added</dd>
</dl>
</li>
</ul>
<a name="next--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>next</h4>
<pre>public&nbsp;<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;next()</pre>
<div class="block">Returns the next element in the iteration.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The next element in the iteration.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.util.NoSuchElementException</code> - if the buffer is empty.</dd>
<dd><code><a href="../../../htsjdk/samtools/SAMException.html" title="class in htsjdk.samtools">SAMException</a></code> - if the buffer is not competent to emit (canEmit returns false)</dd>
</dl>
</li>
</ul>
<a name="remove--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;void&nbsp;remove()</pre>
<div class="block">Removes the next record from this buffer</div>
</li>
</ul>
<a name="size--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;long&nbsp;size()</pre>
<div class="block">Return the total number of elements in the queue, both in memory and on disk</div>
</li>
</ul>
<a name="contains-htsjdk.samtools.util.SamRecordWithOrdinal-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>public&nbsp;boolean&nbsp;contains(<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;samRecordWithOrdinal)</pre>
<div class="block">Returns true if this buffer contains the record at the given index, false otherwise</div>
</li>
</ul>
<a name="setResultState-htsjdk.samtools.util.SamRecordWithOrdinal-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setResultState</h4>
<pre>public&nbsp;void&nbsp;setResultState(<a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util">SamRecordWithOrdinal</a>&nbsp;samRecordWithOrdinal,
                           boolean&nbsp;resultState)</pre>
<div class="block">Mark the current samRecordWithOrdinal as having been examined.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>samRecordWithOrdinal</code> - The samRecordWithOrdinal to be marked</dd>
<dd><code>resultState</code> - Boolean flag indicating the result of the examination of this record.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../htsjdk/samtools/SAMException.html" title="class in htsjdk.samtools">SAMException</a></code> - if the provided recordIndex is not found within the SamRecordTrackingBuffer</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Close IO resources associated with each underlying BufferBlock</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SamRecordTrackingBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../htsjdk/samtools/util/SamRecordIntervalIteratorFactory.html" title="class in htsjdk.samtools.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../htsjdk/samtools/util/SamRecordWithOrdinal.html" title="class in htsjdk.samtools.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?htsjdk/samtools/util/SamRecordTrackingBuffer.html" target="_top">Frames</a></li>
<li><a href="SamRecordTrackingBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
